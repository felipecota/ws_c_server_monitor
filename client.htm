<html>
<body>
  <script>  
  
    var ws = null;
    
    function inter( fn, delay ) { fn(); setInterval( fn, delay ); }
    
    // Check every 10 seconds if still connected, if not, try connect again
    document.addEventListener('DOMContentLoaded', function(){ 
        inter(() => {
              if (ws == null || ws.readyState === ws.CLOSED) wsSocket();
            },10000);
    }, false);  
  
    function wsSocket() {
      ws = new WebSocket('ws://localhost:8081');
      ws.onopen = function () { ws.send('Ping'); };
      ws.onerror = function (error) {
          console.log(error);
      };
      ws.onmessage = function (e) {
          console.log(e.data);
      };
    }
    
  </script>
</body>
</html>
